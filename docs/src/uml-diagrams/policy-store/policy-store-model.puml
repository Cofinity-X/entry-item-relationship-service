@startuml
'https://plantuml.com/class-diagram



'https://www.w3.org/TR/odrl-model/'


class Policy {
    * policyId : String
    createdOn : OffsetDateTime
    validUntil : OffsetDateTime
    permissions : Collection<Permission>
}

class Permission {
    action : PolicyType
    logicalContraintType : LogicalConstraintType
    constraints : Collection<Constraint>
}


class Constraint {
     leftOperand  : String / LeftConstraintConstants
     operator : OperatorType
     rightOperand : List<RightOperand>
}

class RightOperand {
    value : String
    version : ComparableVersion
}

enum LeftConstraintConstants {
    Membership,
    FrameworkAgreement.traceability
    FrameworkAgreement.resiliency
    FrameworkAgreement.quality
    PURPOSE
    BusinessPartnerNumber
}


'https://www.w3.org/TR/odrl-vocab/#constraintRelationalOperators'
enum OperatorType {
    EQ (eq, "Equals to")
    NEQ (new, "Not equal to")
    LT (lt, "Less than")
    GT (gt, "Greater than")
    ? IN (in, "In") '?'
    LTEQ (lteq, "Less than or equal to")
    GTEQ (gteq, "Greater than or equal to")
    ISA (isA, "Is a")
    HASPART (hasPart, "Has part")
    ISPARTOF (isPartOf, "Is part of")
    IAO (isAllOf, "Is all of")
    ISALLOF (isAllOf, "Is all of")
    ISNONEOF (isNoneOf, "Is none of")
}

'"@id": "http://www.w3.org/ns/odrl/2/gt"'
'"@id": "http://www.w3.org/ns/odrl/2/gteq"'
'"@id": "http://www.w3.org/ns/odrl/2/isPartOf"'
'"@id": "http://www.w3.org/ns/odrl/2/hasPart"'
'"@id": "http://www.w3.org/ns/odrl/2/isAnyOf"'
'"@id": "http://www.w3.org/ns/odrl/2/lteq"'
'"@id": "http://www.w3.org/ns/odrl/2/eq"'
'"@id": "http://www.w3.org/ns/odrl/2/neq"'
'"@id": "http://www.w3.org/ns/odrl/2/isNoneOf"'
'"@id": "http://www.w3.org/ns/odrl/2/lt"'
'"@id": "http://www.w3.org/ns/odrl/2/isAllOf"'
'"@id": "http://www.w3.org/ns/odrl/2/isA"'

enum PolicyType {
    ACCESS
    USE
}

enum LogicalConstraintType{
    AND
    OR
    XONE
    ANDSEQUENCE
}

Policy ||--|{  Permission
Permission ||--|| PolicyType
Permission ||--|| LogicalConstraintType
Permission ||--|{   Constraint
Constraint ||--|{ RightOperand
Constraint ||--|| OperatorType
Constraint -- LeftConstraintConstants
@enduml